

<!DOCTYPE html>


@model NOVA.Models.MSIPAcik

<html>
<head>
    <meta name="viewport" content="width=device-width" />
   






    <script src="~/lib/jquery/jquery.js"></script>
    <script src="~/lib/jqueryui/jquery-ui.min.js"></script>
    <link href="~/lib/pivot/pivot.min.css" rel="stylesheet" />
    <script src="~/lib/pivot/pivot.min.js"></script>
    


</head>
<body style="background-color: #f5f5f9 !important;font-size:10px !important;">
    <div class="container" sstyle="max-height:200px;">
        
                <table class="table table-responsive" style="overflow-y:scroll">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(m => Model.CARI_ISIM)
                            </th>
                            <th>
                                @Html.DisplayNameFor(m => Model.STOK_ADI)
                            </th>
                            <th>
                                @Html.DisplayNameFor(m => Model.FISNO) 
                            </th>

                        </tr>

                    </thead>
                    <tbody>
                        @foreach (var item in ViewBag.Cariler as List<NOVA.Models.MSIPAcik>)
                        {
                        <tr>
                            <td>
                                @Html.DisplayFor(m => item.CARI_ISIM)
                            </td>
                            <td>
                                @Html.DisplayFor(m => item.STOK_ADI)
                            </td>
                            <td>
                                @Html.DisplayFor(m => item.FISNO)
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
       
    <div class="container">
        <div id="pivotoutput"></div>
    </div>
    <script>
        var takiplist = [];

        function drawPivot(){
            $(function () {
                $("#pivotoutput").pivotUI(
                    takiplist,
                    {
                        rows: ["CARI_ISIM"],
                        cols: [""],
                        vals: ["FISNO"],
                        aggregatorName: "Sum"
                    })
            });
        }
        function getPivot() {
            return fetch('./Index?handler=PivotData',
                {
                    method: 'get',
                    headers: {
                        'Content-Type': 'application/json;charset=UTF-8'
                    }
                }).then(function (response) {
                    if (response.ok) { return response.text(); } else { throw Error("Hata"); }
                }).then(function (text) {
                    try {
                        return JSON.parse(text);
                    } catch (e) {

                    }
                }).then(function (responseJSON) {
                    takiplist = @Html.Raw(Json.Encode(ViewBag.Cariler));
                    drawPivot();
                });
        }
        getPivot();
    </script>
</body>

</html>